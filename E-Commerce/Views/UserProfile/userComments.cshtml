@using ECommerce.PublicModel
@model IEnumerable<CommentAndStar>

@{
    ViewData["Title"] = "userComments";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div>
    @(await Html.PartialAsync("_UserPanel"))
</div>

<div class="col-lg-9 col-md-8 col-xs-12 pull-right">
    <div class="col-lg-12 col-xs-12 pull-right">
        <div class="headline-profile">
            <span>نقد و نظرات</span>
        </div>
        <div class="profile-stats">
            @{
                foreach (var item in Model)
                {
                    <div class="profile-recent-fav">
                        <div class="profile-comment">
                            <div class="profile-comment-thumb">
                                <div class="profile-comment-img">
                                    <a href="#"><img src="~/images/product-slider-2/111460776.jpg"></a>
                                </div>
                                <div class="profile-comment-rating">
                                    @*<p>امتیاز من به محصول</p>*@
                                    @if (item.Stars >= 1)
                                    {
                                        <span class="star-item"><img src="~/images/search/star-1.svg"></span>
                                    }
                                    @if (item.Stars >= 2)
                                    {
                                        <span class="star-item"><img src="~/images/search/star-1.svg"></span>
                                    }
                                    @if (item.Stars >= 3)
                                    {
                                        <span class="star-item"><img src="~/images/search/star-1.svg"></span>
                                    }
                                    @if (item.Stars >= 4)
                                    {
                                        <span class="star-item"><img src="~/images/search/star-1.svg"></span>
                                    }
                                    @if (item.Stars == 5)
                                    {
                                        <span class="star-item"><img src="~/images/search/star-1.svg"></span>
                                    }
                                </div>
                            </div>
                            <div class="profile-comment-content">
                                <h4>
                                    امتیاز من به: @item.Product?.Name
                                    @if (item.IsApproved)
                                    {
                                        <span class="profile-comment-status-review">تایید شد</span>
                                    }
                                    else
                                    {
                                        <span class="profile-comment-status-review">در انتظار بررسی</span>
                                    }

                                    <p>@item.Comment</p>
                                    <p>تاریخ ثبت:@item.Date.ToPersianDateString()</p>
                                </h4>
                                <ul class="profile-comment-actions">
                                    @*<li>
                                            <button class="btn-helpful">
                                                0
                                                <i class="fa fa-thumbs-o-up" aria-hidden="true"></i>
                                            </button>
                                            <button class="btn-helpful">
                                                0
                                                <i class="fa fa-thumbs-o-down" aria-hidden="true"></i>
                                            </button>
                                        </li>*@
                                    <li>
                                        @*<a class="edit-address-btn" data-toggel="modal" data-target=".bootstrapmodal" asp-controller="UserProfile" asp-action="userCommentEdit" asp-route-id="@item.Id">ویرایش</a>
                                        <button class="edit-address-btn">ویرایش</button>
                                        <button class="remove-address-btn">حذف</button>
                                        <a class="edit-address-btn" asp-controller="UserProfile" asp-action="DeleteUserComment" asp-route-id="@item.Id">حذف</a>*@
                                        <a class="btn btn-info" id="editagency" data-toggle="modal" asp-action="userCommentEdit"
                                           data-target="#modal-action-comment" asp-route-id="@item.Id">
                                            <i class="glyphicon glyphicon-pencil"></i>
                                            ویرایش
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                }
            }

        </div>
    </div>
</div>

<script>
    (function ($) {
        function ShowModal() {
            var $this = this;

            function initilizeModel() {
                $("#modal-action-comment").on('loaded.bs.modal', function (e) {
                }).on('hidden.bs.modal', function (e) {
                    $(this).removeData('bs.modal');
                });
            }
            $this.init = function () {
                initilizeModel();
            }
        }

        $(function () {
            var self = new ShowModal();
            self.init();
        });
    }(jQuery))
</script>